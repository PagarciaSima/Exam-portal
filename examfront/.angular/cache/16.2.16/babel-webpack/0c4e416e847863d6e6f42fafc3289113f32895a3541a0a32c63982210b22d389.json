{"ast":null,"code":"import { slideIn } from 'src/app/animations/animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/category.service\";\nimport * as i2 from \"src/app/services/notification.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@ngx-translate/core\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/material/list\";\nimport * as i10 from \"@angular/material/divider\";\nimport * as i11 from \"@angular/material/tooltip\";\nimport * as i12 from \"../../../shared/paginator/paginator.component\";\nimport * as i13 from \"../../../shared/searcher/searcher.component\";\nfunction ViewCategoriesComponent_mat_list_18_mat_list_item_1_mat_divider_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-divider\", 22);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"inset\", true);\n  }\n}\nfunction ViewCategoriesComponent_mat_list_18_mat_list_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-list-item\", 11)(1, \"div\", 12)(2, \"mat-icon\", 13);\n    i0.ɵɵtext(3, \"category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\")(5, \"span\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementStart(7, \"span\", 15);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 16);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"div\", 17)(12, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ViewCategoriesComponent_mat_list_18_mat_list_item_1_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const category_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.deleteCategory(category_r5.cid));\n    });\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵpipe(14, \"translate\");\n    i0.ɵɵelementStart(15, \"mat-icon\", 19);\n    i0.ɵɵtext(16, \"delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function ViewCategoriesComponent_mat_list_18_mat_list_item_1_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const category_r5 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.editCategory(category_r5.cid));\n    });\n    i0.ɵɵpipe(18, \"translate\");\n    i0.ɵɵpipe(19, \"translate\");\n    i0.ɵɵelementStart(20, \"mat-icon\", 19);\n    i0.ɵɵtext(21, \"edit\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(22, ViewCategoriesComponent_mat_list_18_mat_list_item_1_mat_divider_22_Template, 1, 1, \"mat-divider\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r5 = ctx.$implicit;\n    const last_r6 = ctx.last;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(category_r5.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" - ID: \", category_r5.cid, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r5.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind1(14, 11, \"DELETE\"));\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(13, 9, \"DELETE\") + \" category \" + category_r5.title);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate2(\"aria-label\", \"\", i0.ɵɵpipeBind1(18, 13, \"EDIT\"), \" category \", category_r5.title, \"\");\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind1(19, 15, \"EDIT\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !last_r6);\n  }\n}\nfunction ViewCategoriesComponent_mat_list_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-list\", 9);\n    i0.ɵɵtemplate(1, ViewCategoriesComponent_mat_list_18_mat_list_item_1_Template, 23, 17, \"mat-list-item\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categories);\n  }\n}\nfunction ViewCategoriesComponent_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"mat-icon\", 24);\n    i0.ɵɵtext(2, \"info\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h2\", 25);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 1, \"NO_CATEGORIES_FOUND\"));\n  }\n}\nfunction ViewCategoriesComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"app-paginator\", 27);\n    i0.ɵɵlistener(\"pageChange\", function ViewCategoriesComponent_div_21_Template_app_paginator_pageChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.goToPage($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"page\", ctx_r3.page)(\"totalPages\", ctx_r3.totalPages)(\"range\", 5);\n  }\n}\nexport let ViewCategoriesComponent = /*#__PURE__*/(() => {\n  class ViewCategoriesComponent {\n    constructor(categoryService, notificationService, router, translate) {\n      this.categoryService = categoryService;\n      this.notificationService = notificationService;\n      this.router = router;\n      this.translate = translate;\n      this.categories = [];\n      this.page = 0;\n      this.size = 7;\n      this.totalPages = 1;\n      this.searchTerm = '';\n    }\n    ngOnInit() {\n      this.fetchCategoriesPaged();\n    }\n    /**\r\n     * Fetches a paginated list of categories from the backend service.\r\n     * Updates the local `categories` property and `totalPages` based on the response.\r\n     * Displays an error notification if the request fails.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\n    fetchCategoriesPaged() {\n      this.categoryService.getCategoriesPaged(this.page, this.size, this.searchTerm).subscribe({\n        next: data => {\n          this.categories = data.content;\n          this.totalPages = data.totalPages;\n        },\n        error: () => {\n          this.notificationService.error(this.translate.instant('CATEGORIES_LOAD_ERROR'), this.translate.instant('ERROR'));\n        }\n      });\n    }\n    /**\r\n     * Navigates the user to the \"Add Category\" page within the admin section.\r\n     *\r\n     * This method uses Angular's Router to redirect the user to the route\r\n     * responsible for adding a new category.\r\n     */\n    addCategory() {\n      this.router.navigate(['/admin/add-category']);\n    }\n    /**\r\n     * Navigates to the edit category page.\r\n     */\n    editCategory(categoryId) {\n      this.router.navigate(['/admin/add-category', categoryId]);\n    }\n    /**\r\n     * Deletes a category by its id after confirmation and updates the local list.\r\n     * Shows a notification on success or error.\r\n     */\n    deleteCategory(categoryId) {\n      this.notificationService.confirm(this.translate.instant('CATEGORY_DELETE_CONFIRM'), this.translate.instant('CONFIRM')).then(confirmed => {\n        if (confirmed) {\n          this.categoryService.deleteCategory(categoryId).subscribe({\n            next: () => {\n              this.categories = this.categories.filter(cat => cat.cid !== categoryId);\n              this.notificationService.success(this.translate.instant('CATEGORY_DELETED_SUCCESS'), this.translate.instant('SUCCESS'));\n            },\n            error: () => {\n              this.notificationService.error(this.translate.instant('CATEGORY_DELETE_ERROR'), this.translate.instant('ERROR'));\n            }\n          });\n        }\n      });\n    }\n    /**\r\n     * Executes a search for categories based on the current search term.\r\n     * Resets the page to 0 (first page) and fetches the categories.\r\n     *\r\n     * @returns {void}\r\n     */\n    onSearch() {\n      this.page = 0; // Reset to first page on new search\n      this.fetchCategoriesPaged();\n    }\n    /**\r\n     * Navigates to the specified page of categories if within valid range.\r\n     *\r\n     * @param {number} page - The page number to navigate to.\r\n     * @returns {void}\r\n     */\n    goToPage(page) {\n      if (page >= 0 && page < this.totalPages) {\n        this.page = page;\n        this.fetchCategoriesPaged();\n      }\n    }\n    onSearchTermChange(term) {\n      this.searchTerm = term;\n      this.page = 0; // Reset to first page on new search\n      this.fetchCategoriesPaged();\n    }\n    static {\n      this.ɵfac = function ViewCategoriesComponent_Factory(t) {\n        return new (t || ViewCategoriesComponent)(i0.ɵɵdirectiveInject(i1.CategoryService), i0.ɵɵdirectiveInject(i2.NotificationService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.TranslateService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ViewCategoriesComponent,\n        selectors: [[\"app-view-categories\"]],\n        decls: 22,\n        vars: 23,\n        consts: [[\"role\", \"list\"], [\"tabindex\", \"0\", 1, \"text-center\", 2, \"display\", \"flex\", \"align-items\", \"center\", \"justify-content\", \"center\"], [2, \"margin-right\", \"8px\"], [\"role\", \"search\", 1, \"search-bar\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"mb20\", 3, \"click\"], [2, \"display\", \"flex\", \"justify-content\", \"center\", 3, \"placeholder\", \"ariaLabel\", \"value\", \"valueChange\"], [\"role\", \"list\", \"aria-label\", \"Category List\", \"class\", \"category-list\", 4, \"ngIf\", \"ngIfElse\"], [\"noCategories\", \"\"], [\"style\", \"display: flex; justify-content: center; align-items: center; margin: 16px 0;\", 4, \"ngIf\"], [\"role\", \"list\", \"aria-label\", \"Category List\", 1, \"category-list\"], [\"role\", \"listitem\", \"class\", \"mb20\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"listitem\", 1, \"mb20\"], [1, \"category-item-content\"], [\"matListIcon\", \"\", \"color\", \"primary\", \"aria-hidden\", \"true\", 1, \"category-icon\"], [1, \"font-bold\", \"category-title\"], [1, \"id\"], [1, \"category-description\"], [\"matListItemMeta\", \"\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", 3, \"matTooltip\", \"click\"], [\"aria-hidden\", \"true\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"aria-label\", \"matTooltip\", \"click\"], [3, \"inset\", 4, \"ngIf\"], [3, \"inset\"], [\"role\", \"alert\", \"aria-live\", \"assertive\", 1, \"no-results-message\", 2, \"display\", \"flex\", \"align-items\", \"center\", \"justify-content\", \"center\", \"min-height\", \"300px\", \"width\", \"100%\"], [\"color\", \"warn\", 1, \"no-results-icon\"], [1, \"no-results-text\"], [2, \"display\", \"flex\", \"justify-content\", \"center\", \"align-items\", \"center\", \"margin\", \"16px 0\"], [3, \"page\", \"totalPages\", \"range\", \"pageChange\"]],\n        template: function ViewCategoriesComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"mat-card\")(1, \"mat-list\", 0);\n            i0.ɵɵpipe(2, \"translate\");\n            i0.ɵɵelementStart(3, \"h1\", 1)(4, \"mat-icon\", 2);\n            i0.ɵɵtext(5, \"category\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(6);\n            i0.ɵɵpipe(7, \"translate\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 3);\n            i0.ɵɵpipe(9, \"translate\");\n            i0.ɵɵelementStart(10, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function ViewCategoriesComponent_Template_button_click_10_listener() {\n              return ctx.addCategory();\n            });\n            i0.ɵɵelementStart(11, \"mat-icon\");\n            i0.ɵɵtext(12, \"add\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(13);\n            i0.ɵɵpipe(14, \"translate\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"app-search-bar\", 5);\n            i0.ɵɵlistener(\"valueChange\", function ViewCategoriesComponent_Template_app_search_bar_valueChange_15_listener($event) {\n              return ctx.onSearchTermChange($event);\n            });\n            i0.ɵɵpipe(16, \"translate\");\n            i0.ɵɵpipe(17, \"translate\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(18, ViewCategoriesComponent_mat_list_18_Template, 2, 1, \"mat-list\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(19, ViewCategoriesComponent_ng_template_19_Template, 6, 3, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵtemplate(21, ViewCategoriesComponent_div_21_Template, 2, 3, \"div\", 8);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            const _r1 = i0.ɵɵreference(20);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"@slideIn\", undefined);\n            i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(2, 11, \"CATEGORIES\"));\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 13, \"CATEGORIES\"), \" \");\n            i0.ɵɵadvance(2);\n            i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(9, 15, \"SEARCH_CATEGORY\"));\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(14, 17, \"ADD_CATEGORY\"), \" \");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"placeholder\", i0.ɵɵpipeBind1(16, 19, \"SEARCH_CATEGORY\"))(\"ariaLabel\", i0.ɵɵpipeBind1(17, 21, \"SEARCH_CATEGORY\"))(\"value\", ctx.searchTerm);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.categories.length > 0)(\"ngIfElse\", _r1);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.totalPages > 1);\n          }\n        },\n        dependencies: [i5.NgForOf, i5.NgIf, i6.MatButton, i6.MatIconButton, i7.MatIcon, i8.MatCard, i9.MatList, i9.MatListItem, i10.MatDivider, i9.MatListItemMeta, i11.MatTooltip, i12.PaginatorComponent, i13.SearcherComponent, i4.TranslatePipe],\n        styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%]; (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap var __webpack_modules__ = ({490: (() => {throw new Error(\\\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):nnSyntaxErrornn(129:1) C:\\\\\\\\Users\\\\\\\\pablo\\\\\\\\Desktop\\\\\\\\Cursos de spring\\\\\\\\ExamPortal\\\\\\\\examfront\\\\\\\\src\\\\\\\\app\\\\\\\\pages\\\\\\\\admin\\\\\\\\view-categories\\\\\\\\view-categories.component.css Unclosed blocknn u001b[90m 127 | u001b[39mu001b[33m}u001b[39mn u001b[90m 128 | u001b[39mnu001b[1mu001b[31m>u001b[39mu001b[22mu001b[90m 129 | u001b[39mmat-list-item u001b[33m[u001b[39mmatListItemMetau001b[33m]u001b[39m button u001b[33m{u001b[39mn u001b[90m     | u001b[39mu001b[1mu001b[31m^u001b[39mu001b[22mn u001b[90m 130 | u001b[39m  widthu001b[33m:u001b[39m fit-contentu001b[33m;u001b[39mn u001b[90m 131 | u001b[39mn\\\");})}); // startup // Load entry module and return exports // This entry module doesn\\\"t tell about it\\\"s top-level declarations so it can't be inlined\\nvar __webpack_exports__ = {}; __webpack_modules__[490](); resource = __webpack_exports__;})()[_ngcontent-%COMP%]   ;[_ngcontent-%COMP%]{}\"],\n        data: {\n          animation: [slideIn]\n        }\n      });\n    }\n  }\n  return ViewCategoriesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}